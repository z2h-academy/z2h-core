# -----------------------------------------------------------------------------
# Dockerfile.runtime
# Imagen privada del runtime K3D-LAKEHOUSE
# Nunca se expone públicamente
# -----------------------------------------------------------------------------

FROM ubuntu:22.04

SHELL ["/bin/bash", "-c"]

# -----------------------------------------------
# 1. Dependencias mínimas para ejecutar pods
# -----------------------------------------------
RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y \
    bash \
    curl \
    wget \
    ca-certificates \
    jq \
    tini \
    && rm -rf /var/lib/apt/lists/*

# tini como init (evita zombies y gestiona señales correctamente)
ENTRYPOINT ["/usr/bin/tini", "--"]

# -----------------------------------------------
# 2. Espacio privado del runtime (vacío por ahora)
# -----------------------------------------------
WORKDIR /app

# TODO (futuro):
# COPY runtime/ /app/runtime/
# COPY scripts/ /app/scripts/
# RUN chmod -R 755 /app

# -----------------------------------------------
# 3. Comando seguro (por ahora sin runtime real)
# -----------------------------------------------
# Como aún no existen scripts ni start.sh, dejamos bash como fallback.
CMD ["bash"]
